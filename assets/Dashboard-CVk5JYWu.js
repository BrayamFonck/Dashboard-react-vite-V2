import{r as l,j as n,a as De,u as Ot,L as _t}from"./index-CV8h1QbZ.js";import{c as ot,T as z,a as se,w as St,b as ie,f as U,d as ae,u as ct,e as dt,S as At,g as pe,s as Et,i as Pe,h as Ct,j as kt,k as Tt,l as Dt,m as $t,r as It,n as re,o as Rt,p as qe,q as Lt,t as T,v as $e,x as Mt,y as Kt,z as Z,A as Ft,B as Bt,C as ut,D as Wt,E as zt,F as W,G as Ut,H as qt,I as Ht,J as Vt,K as Gt,L as Zt,M as Xt,N as Yt,O as mt,P as Jt,Q as Qt,R as fe,U as Oe,V as ee,W as ea,X as ta,Y as aa,Z as ra,_ as na,$ as sa,a0 as ht,a1 as ia,a2 as la,a3 as oa,a4 as ca,a5 as da,a6 as He,a7 as ua,a8 as ma,a9 as ha,aa as _e,ab as ga,ac as pa,ad as ce,ae as fa,af as de,ag as xa,ah as va,ai as Ve,aj as ba,ak as ya,al as ja,am as wa,an as Na,ao as Pa,ap as Oa,aq as _a,ar as $,as as Sa,at as le,au as Aa,av as Ge,aw as Ea,ax as Ca}from"./coingeckoService-CAITe6x8.js";import{E as ka}from"./ErrorMessage-BdllXXuZ.js";const Ta=(e,t)=>{const a=l.useRef(null),r=l.useRef(e);return l.useEffect(()=>{r.current=e},[e]),l.useEffect(()=>{const s=()=>r.current();a.current=setInterval(s,t);const o=()=>{a.current&&(clearInterval(a.current),a.current=null)},c=d=>{d.persisted&&t!==null&&!a.current&&(a.current=setInterval(s,t))};return window.addEventListener("pagehide",o),window.addEventListener("pageshow",c),()=>{a.current&&clearInterval(a.current),window.removeEventListener("pagehide",o),window.removeEventListener("pageshow",c)}},[t]),()=>{a.current&&(clearInterval(a.current),a.current=null)}};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],gt=ot("external-link",Da);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Se=ot("star",$a),oe=({title:e,value:t,change:a,changePercent:r,icon:i,color:s="blue"})=>{const o=a>=0,c={blue:"from-blue-500 to-blue-600",green:"from-green-500 to-green-600",purple:"from-purple-500 to-purple-600",orange:"from-orange-500 to-orange-600",red:"from-red-500 to-red-600"};return n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 transition-all duration-300 hover:shadow-xl hover:scale-105 focus-within:ring-2 focus-within:ring-blue-500 focus-within:ring-offset-2",role:"article","aria-labelledby":`stat-title-${e.replace(/\s+/g,"-").toLowerCase()}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{id:`stat-title-${e.replace(/\s+/g,"-").toLowerCase()}`,className:"text-xs sm:text-sm font-medium text-gray-600 mb-1 truncate",children:e}),n.jsx("p",{className:"text-lg sm:text-2xl font-bold text-gray-900 mb-2 break-words",children:t}),n.jsxs("div",{className:"flex items-center space-x-1",children:[o?n.jsx(z,{className:"w-3 h-3 sm:w-4 sm:h-4 text-green-500 flex-shrink-0","aria-hidden":"true"}):n.jsx(se,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-500 flex-shrink-0","aria-hidden":"true"}),n.jsxs("span",{className:`text-xs sm:text-sm font-semibold ${o?"text-green-500":"text-red-500"}`,"aria-label":`Cambio de ${o?"aumento":"disminuci√≥n"} del ${Math.abs(r)}%`,children:[o?"+":"",r,"%"]}),n.jsx("span",{className:"text-xs text-gray-500 hidden sm:inline",children:"vs ayer"}),n.jsx("span",{className:"text-xs text-gray-500 sm:hidden",children:"24h"})]})]}),n.jsx("div",{className:`p-2 sm:p-3 rounded-lg bg-gradient-to-r ${c[s]} flex-shrink-0 ml-2 sm:ml-4`,children:n.jsx(i,{className:"w-4 h-4 sm:w-6 sm:h-6 text-white","aria-hidden":"true"})})]})})},pt=Math.cos,ue=Math.sin,B=Math.sqrt,me=Math.PI,xe=2*me,Ie={draw(e,t){const a=B(t/me);e.moveTo(a,0),e.arc(0,0,a,0,xe)}},Ia={draw(e,t){const a=B(t/5)/2;e.moveTo(-3*a,-a),e.lineTo(-a,-a),e.lineTo(-a,-3*a),e.lineTo(a,-3*a),e.lineTo(a,-a),e.lineTo(3*a,-a),e.lineTo(3*a,a),e.lineTo(a,a),e.lineTo(a,3*a),e.lineTo(-a,3*a),e.lineTo(-a,a),e.lineTo(-3*a,a),e.closePath()}},ft=B(1/3),Ra=ft*2,La={draw(e,t){const a=B(t/Ra),r=a*ft;e.moveTo(0,-a),e.lineTo(r,0),e.lineTo(0,a),e.lineTo(-r,0),e.closePath()}},Ma={draw(e,t){const a=B(t),r=-a/2;e.rect(r,r,a,a)}},Ka=.8908130915292852,xt=ue(me/10)/ue(7*me/10),Fa=ue(xe/10)*xt,Ba=-pt(xe/10)*xt,Wa={draw(e,t){const a=B(t*Ka),r=Fa*a,i=Ba*a;e.moveTo(0,-a),e.lineTo(r,i);for(let s=1;s<5;++s){const o=xe*s/5,c=pt(o),d=ue(o);e.lineTo(d*a,-c*a),e.lineTo(c*r-d*i,d*r+c*i)}e.closePath()}},je=B(3),za={draw(e,t){const a=-B(t/(je*3));e.moveTo(0,a*2),e.lineTo(-je*a,-a),e.lineTo(je*a,-a),e.closePath()}},L=-.5,M=B(3)/2,Ae=1/B(12),Ua=(Ae/2+1)*3,qa={draw(e,t){const a=B(t/Ua),r=a/2,i=a*Ae,s=r,o=a*Ae+a,c=-s,d=o;e.moveTo(r,i),e.lineTo(s,o),e.lineTo(c,d),e.lineTo(L*r-M*i,M*r+L*i),e.lineTo(L*s-M*o,M*s+L*o),e.lineTo(L*c-M*d,M*c+L*d),e.lineTo(L*r+M*i,L*i-M*r),e.lineTo(L*s+M*o,L*o-M*s),e.lineTo(L*c+M*d,L*d-M*c),e.closePath()}};function Ha(e,t){let a=null,r=St(i);e=typeof e=="function"?e:ie(e||Ie),t=typeof t=="function"?t:ie(t===void 0?64:+t);function i(){let s;if(a||(a=s=r()),e.apply(this,arguments).draw(a,+t.apply(this,arguments)),s)return a=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:ie(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:ie(+s),i):t},i.context=function(s){return arguments.length?(a=s??null,i):a},i}var Va=["type","size","sizeType"];function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Ee.apply(null,arguments)}function Ze(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function Xe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Ze(Object(a),!0).forEach(function(r){Ga(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ze(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Ga(e,t,a){return(t=Za(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Za(e){var t=Xa(e,"string");return typeof t=="symbol"?t:t+""}function Xa(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ya(e,t){if(e==null)return{};var a,r,i=Ja(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Ja(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var vt={symbolCircle:Ie,symbolCross:Ia,symbolDiamond:La,symbolSquare:Ma,symbolStar:Wa,symbolTriangle:za,symbolWye:qa},Qa=Math.PI/180,er=e=>{var t="symbol".concat(ct(e));return vt[t]||Ie},tr=(e,t,a)=>{if(t==="area")return e;switch(a){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var r=18*Qa;return 1.25*e*e*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},ar=(e,t)=>{vt["symbol".concat(ct(e))]=t},Re=e=>{var{type:t="circle",size:a=64,sizeType:r="area"}=e,i=Ya(e,Va),s=Xe(Xe({},i),{},{type:t,size:a,sizeType:r}),o=()=>{var b=er(t),p=Ha().type(b).size(tr(a,r,t));return p()},{className:c,cx:d,cy:u}=s,g=U(s,!0);return d===+d&&u===+u&&a===+a?l.createElement("path",Ee({},g,{className:ae("recharts-symbols",c),transform:"translate(".concat(d,", ").concat(u,")"),d:o()})):null};Re.registerSymbol=ar;function Ce(){return Ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Ce.apply(null,arguments)}function Ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function rr(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Ye(Object(a),!0).forEach(function(r){Le(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ye(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Le(e,t,a){return(t=nr(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function nr(e){var t=sr(e,"string");return typeof t=="symbol"?t:t+""}function sr(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var K=32;class Me extends l.PureComponent{renderIcon(t,a){var{inactiveColor:r}=this.props,i=K/2,s=K/6,o=K/3,c=t.inactive?r:t.color,d=a??t.type;if(d==="none")return null;if(d==="plainline")return l.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:i,x2:K,y2:i,className:"recharts-legend-icon"});if(d==="line")return l.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(K,"M").concat(2*o,",").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(d==="rect")return l.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(K/8,"h").concat(K,"v").concat(K*3/4,"h").concat(-K,"z"),className:"recharts-legend-icon"});if(l.isValidElement(t.legendIcon)){var u=rr({},t);return delete u.legendIcon,l.cloneElement(t.legendIcon,u)}return l.createElement(Re,{fill:c,cx:i,cy:i,size:K,sizeType:"diameter",type:d})}renderItems(){var{payload:t,iconSize:a,layout:r,formatter:i,inactiveColor:s,iconType:o}=this.props,c={x:0,y:0,width:K,height:K},d={display:r==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((g,b)=>{var p=g.formatter||i,v=ae({"recharts-legend-item":!0,["legend-item-".concat(b)]:!0,inactive:g.inactive});if(g.type==="none")return null;var f=g.inactive?s:g.color,h=p?p(g.value,g,b):g.value;return l.createElement("li",Ce({className:v,style:d,key:"legend-item-".concat(b)},dt(this.props,g,b)),l.createElement(At,{width:a,height:a,viewBox:c,style:u,"aria-label":"".concat(h," legend icon")},this.renderIcon(g,o)),l.createElement("span",{className:"recharts-legend-item-text",style:{color:f}},h))})}render(){var{payload:t,layout:a,align:r}=this.props;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:a==="horizontal"?r:"left"};return l.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}Le(Me,"displayName","Legend");Le(Me,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});function ir(){return pe(Et)}var lr=["contextPayload"];function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ke.apply(null,arguments)}function Je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function te(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Je(Object(a),!0).forEach(function(r){Ke(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Je(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Ke(e,t,a){return(t=or(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function or(e){var t=cr(e,"string");return typeof t=="symbol"?t:t+""}function cr(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dr(e,t){if(e==null)return{};var a,r,i=ur(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function ur(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function mr(e){return e.value}function hr(e){var{contextPayload:t}=e,a=dr(e,lr),r=Lt(t,e.payloadUniqBy,mr),i=te(te({},a),{},{payload:r});return l.isValidElement(e.content)?l.cloneElement(e.content,i):typeof e.content=="function"?l.createElement(e.content,i):l.createElement(Me,i)}function gr(e,t,a,r,i,s){var{layout:o,align:c,verticalAlign:d}=t,u,g;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(c==="center"&&o==="vertical"?u={left:((r||0)-s.width)/2}:u=c==="right"?{right:a&&a.right||0}:{left:a&&a.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(d==="middle"?g={top:((i||0)-s.height)/2}:g=d==="bottom"?{bottom:a&&a.bottom||0}:{top:a&&a.top||0}),te(te({},u),g)}function pr(e){var t=re();return l.useEffect(()=>{t(Rt(e))},[t,e]),null}function fr(e){var t=re();return l.useEffect(()=>(t(qe(e)),()=>{t(qe({width:0,height:0}))}),[t,e]),null}function xr(e){var t=ir(),a=Ct(),r=kt(),{width:i,height:s,wrapperStyle:o,portal:c}=e,[d,u]=Tt([t]),g=Dt(),b=$t(),p=g-(r.left||0)-(r.right||0),v=ve.getWidthOrHeight(e.layout,s,i,p),f=c?o:te(te({position:"absolute",width:v?.width||i||"auto",height:v?.height||s||"auto"},gr(o,e,r,g,b,d)),o),h=c??a;if(h==null)return null;var w=l.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:u},l.createElement(pr,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),l.createElement(fr,{width:d.width,height:d.height}),l.createElement(hr,ke({},e,v,{margin:r,chartWidth:g,chartHeight:b,contextPayload:t})));return It.createPortal(w,h)}class ve extends l.PureComponent{static getWidthOrHeight(t,a,r,i){return t==="vertical"&&Pe(a)?{height:a}:t==="horizontal"?{width:r||i}:null}render(){return l.createElement(xr,this.props)}}Ke(ve,"displayName","Legend");Ke(ve,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});var be=e=>null;be.displayName="Cell";var bt=e=>e.graphicalItems.polarItems,vr=T([$e,Mt],Kt),Fe=T([bt,Z,vr],Ft),br=T([Fe],Bt),Be=T([br,ut],Wt),yr=T([Be,Z,Fe],zt),jr=T([Be,Z,Fe],(e,t,a)=>a.length>0?e.flatMap(r=>a.flatMap(i=>{var s,o=W(r,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(r=>({value:W(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]}))),Qe=()=>{},wr=T([Z,Ut,Qe,jr,Qe],qt),yt=T([Z,Ht,Be,yr,Vt,$e,wr],Gt),Nr=T([yt,Z,Zt],Xt);T([Z,yt,Nr,$e],Yt);function et(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function tt(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?et(Object(a),!0).forEach(function(r){Pr(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):et(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Pr(e,t,a){return(t=Or(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Or(e){var t=_r(e,"string");return typeof t=="symbol"?t:t+""}function _r(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var We=(e,t)=>t,Sr=[],ze=(e,t,a)=>a?.length===0?Sr:a,jt=T([ut,We,ze],(e,t,a)=>{var{chartData:r}=e,i;if(t?.data!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&a!=null&&(i=a.map(s=>tt(tt({},t.presentationProps),s.props))),i!=null)return i}),Ar=T([jt,We,ze],(e,t,a)=>{if(e!=null)return e.map((r,i)=>{var s,o=W(r,t.nameKey,t.name),c;return a!=null&&(s=a[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?c=a[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?c=r.fill:c=t.fill,{value:mt(o,t.dataKey),color:c,payload:r,type:t.legendType}})}),Er=T([bt,We],(e,t)=>{if(e.some(a=>a.type==="pie"&&t.dataKey===a.dataKey&&t.data===a.data))return t}),Cr=T([jt,Er,ze,Jt],(e,t,a,r)=>{if(!(t==null||e==null))return un({offset:r,pieSettings:t,displayedData:e,cells:a})}),we={},at;function kr(){return at||(at=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){if(typeof a!="object"||a==null)return!1;if(Object.getPrototypeOf(a)===null)return!0;if(Object.prototype.toString.call(a)!=="[object Object]"){const i=a[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(a,Symbol.toStringTag)?.writable?!1:a.toString()===`[object ${i}]`}let r=a;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(a)===r}e.isPlainObject=t}(we)),we}var Ne,rt;function Tr(){return rt||(rt=1,Ne=kr().isPlainObject),Ne}var Dr=Tr();const $r=Qt(Dr);function he(){return he=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},he.apply(null,arguments)}var nt=(e,t,a,r,i)=>{var s=a-r,o;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+a,",").concat(t),o+="L ".concat(e+a-s/2,",").concat(t+i),o+="L ".concat(e+a-s/2-r,",").concat(t+i),o+="L ".concat(e,",").concat(t," Z"),o},Ir={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Rr=e=>{var t=fe(e,Ir),a=l.useRef(),[r,i]=l.useState(-1);l.useEffect(()=>{if(a.current&&a.current.getTotalLength)try{var w=a.current.getTotalLength();w&&i(w)}catch{}},[]);var{x:s,y:o,upperWidth:c,lowerWidth:d,height:u,className:g}=t,{animationEasing:b,animationDuration:p,animationBegin:v,isUpdateAnimationActive:f}=t;if(s!==+s||o!==+o||c!==+c||d!==+d||u!==+u||c===0&&d===0||u===0)return null;var h=ae("recharts-trapezoid",g);return f?l.createElement(Oe,{canBegin:r>0,from:{upperWidth:0,lowerWidth:0,height:u,x:s,y:o},to:{upperWidth:c,lowerWidth:d,height:u,x:s,y:o},duration:p,animationEasing:b,isActive:f},w=>{var{upperWidth:y,lowerWidth:A,height:N,x:k,y:I}=w;return l.createElement(Oe,{canBegin:r>0,from:"0px ".concat(r===-1?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:p,easing:b},l.createElement("path",he({},U(t,!0),{className:h,d:nt(k,I,y,A,N),ref:a})))}):l.createElement("g",null,l.createElement("path",he({},U(t,!0),{className:h,d:nt(s,o,c,d,u)})))},Lr=["option","shapeType","propTransformer","activeClassName","isActive"];function Mr(e,t){if(e==null)return{};var a,r,i=Kr(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Kr(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function st(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function ge(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?st(Object(a),!0).forEach(function(r){Fr(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):st(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Fr(e,t,a){return(t=Br(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Br(e){var t=Wr(e,"string");return typeof t=="symbol"?t:t+""}function Wr(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zr(e,t){return ge(ge({},t),e)}function Ur(e,t){return e==="symbols"}function it(e){var{shapeType:t,elementProps:a}=e;switch(t){case"rectangle":return l.createElement(ta,a);case"trapezoid":return l.createElement(Rr,a);case"sector":return l.createElement(ea,a);case"symbols":if(Ur(t))return l.createElement(Re,a);break;default:return null}}function qr(e){return l.isValidElement(e)?e.props:e}function Hr(e){var{option:t,shapeType:a,propTransformer:r=zr,activeClassName:i="recharts-active-shape",isActive:s}=e,o=Mr(e,Lr),c;if(l.isValidElement(t))c=l.cloneElement(t,ge(ge({},o),qr(t)));else if(typeof t=="function")c=t(o);else if($r(t)&&typeof t!="boolean"){var d=r(t,o);c=l.createElement(it,{shapeType:a,elementProps:d})}else{var u=o;c=l.createElement(it,{shapeType:a,elementProps:u})}return s?l.createElement(ee,{className:i},c):c}var Vr=(e,t)=>{var a=re();return(r,i)=>s=>{e?.(r,i,s),a(aa({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},Gr=e=>{var t=re();return(a,r)=>i=>{e?.(a,r,i),t(ra())}},Zr=(e,t)=>{var a=re();return(r,i)=>s=>{e?.(r,i,s),a(na({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}},Xr=["onMouseEnter","onClick","onMouseLeave"];function Yr(e,t){if(e==null)return{};var a,r,i=Jr(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Jr(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function lt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?lt(Object(a),!0).forEach(function(r){ye(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function ye(e,t,a){return(t=Qr(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Qr(e){var t=en(e,"string");return typeof t=="symbol"?t:t+""}function en(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},G.apply(null,arguments)}function tn(e){var t=l.useMemo(()=>U(e,!1),[e]),a=l.useMemo(()=>ht(e.children,be),[e.children]),r=l.useMemo(()=>({name:e.name,nameKey:e.nameKey,tooltipType:e.tooltipType,data:e.data,dataKey:e.dataKey,cx:e.cx,cy:e.cy,startAngle:e.startAngle,endAngle:e.endAngle,minAngle:e.minAngle,paddingAngle:e.paddingAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,cornerRadius:e.cornerRadius,legendType:e.legendType,fill:e.fill,presentationProps:t}),[e.cornerRadius,e.cx,e.cy,e.data,e.dataKey,e.endAngle,e.innerRadius,e.minAngle,e.name,e.nameKey,e.outerRadius,e.paddingAngle,e.startAngle,e.tooltipType,e.legendType,e.fill,t]),i=pe(s=>Ar(s,r,a));return l.createElement(ia,{legendPayload:i})}function an(e){var{dataKey:t,nameKey:a,sectors:r,stroke:i,strokeWidth:s,fill:o,name:c,hide:d,tooltipType:u}=e;return{dataDefinedOnItem:r?.map(g=>g.tooltipPayload),positions:r?.map(g=>g.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:o,dataKey:t,nameKey:a,name:mt(c,t),hide:d,type:u,color:o,unit:""}}}var rn=(e,t)=>e>t?"start":e<t?"end":"middle",nn=(e,t,a)=>typeof t=="function"?t(e):de(t,a,a*.8),sn=(e,t,a)=>{var{top:r,left:i,width:s,height:o}=t,c=fa(s,o),d=i+de(e.cx,s,s/2),u=r+de(e.cy,o,o/2),g=de(e.innerRadius,c,0),b=nn(a,e.outerRadius,c),p=e.maxRadius||Math.sqrt(s*s+o*o)/2;return{cx:d,cy:u,innerRadius:g,outerRadius:b,maxRadius:p}},ln=(e,t)=>{var a=ce(t-e),r=Math.min(Math.abs(t-e),360);return a*r},on=(e,t)=>{if(l.isValidElement(e))return l.cloneElement(e,t);if(typeof e=="function")return e(t);var a=ae("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return l.createElement(ga,G({},t,{type:"linear",className:a}))},cn=(e,t,a)=>{if(l.isValidElement(e))return l.cloneElement(e,t);var r=a;if(typeof e=="function"&&(r=e(t),l.isValidElement(r)))return r;var i=ae("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return l.createElement(pa,G({},t,{alignmentBaseline:"middle",className:i}),r)};function dn(e){var{sectors:t,props:a,showLabels:r}=e,{label:i,labelLine:s,dataKey:o}=a;if(!r||!i||!t)return null;var c=U(a,!1),d=U(i,!1),u=U(s,!1),g=typeof i=="object"&&"offsetRadius"in i&&i.offsetRadius||20,b=t.map((p,v)=>{var f=(p.startAngle+p.endAngle)/2,h=_e(p.cx,p.cy,p.outerRadius+g,f),w=P(P(P(P({},c),p),{},{stroke:"none"},d),{},{index:v,textAnchor:rn(h.x,p.cx)},h),y=P(P(P(P({},c),p),{},{fill:"none",stroke:p.fill},u),{},{index:v,points:[_e(p.cx,p.cy,p.outerRadius,f),h],key:"line"});return l.createElement(ee,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(v)},s&&on(s,y),cn(i,w,W(p,o)))});return l.createElement(ee,{className:"recharts-pie-labels"},b)}function wt(e){var{sectors:t,activeShape:a,inactiveShape:r,allOtherPieProps:i,showLabels:s}=e,o=pe(ua),{onMouseEnter:c,onClick:d,onMouseLeave:u}=i,g=Yr(i,Xr),b=Vr(c,i.dataKey),p=Gr(u),v=Zr(d,i.dataKey);return t==null?null:l.createElement(l.Fragment,null,t.map((f,h)=>{if(f?.startAngle===0&&f?.endAngle===0&&t.length!==1)return null;var w=a&&String(h)===o,y=o?r:null,A=w?a:y,N=P(P({},f),{},{stroke:f.stroke,tabIndex:-1,[ha]:h,[ma]:i.dataKey});return l.createElement(ee,G({tabIndex:-1,className:"recharts-pie-sector"},dt(g,f,h),{onMouseEnter:b(f,h),onMouseLeave:p(f,h),onClick:v(f,h),key:"sector-".concat(f?.startAngle,"-").concat(f?.endAngle,"-").concat(f.midAngle,"-").concat(h)}),l.createElement(Hr,G({option:A,isActive:w,shapeType:"sector"},N)))}),l.createElement(dn,{sectors:t,props:i,showLabels:s}))}function un(e){var t,{pieSettings:a,displayedData:r,cells:i,offset:s}=e,{cornerRadius:o,startAngle:c,endAngle:d,dataKey:u,nameKey:g,tooltipType:b}=a,p=Math.abs(a.minAngle),v=ln(c,d),f=Math.abs(v),h=r.length<=1?0:(t=a.paddingAngle)!==null&&t!==void 0?t:0,w=r.filter(O=>W(O,u,0)!==0).length,y=(f>=360?w:w-1)*h,A=f-w*p-y,N=r.reduce((O,j)=>{var E=W(j,u,0);return O+(Pe(E)?E:0)},0),k;if(N>0){var I;k=r.map((O,j)=>{var E=W(O,u,0),x=W(O,g,j),_=sn(a,s,O),X=(Pe(E)?E:0)/N,R,q=P(P({},O),i&&i[j]&&i[j].props);j?R=I.endAngle+ce(v)*h*(E!==0?1:0):R=c;var Y=R+ce(v)*((E!==0?p:0)+X*A),J=(R+Y)/2,H=(_.innerRadius+_.outerRadius)/2,V=[{name:x,value:E,payload:q,dataKey:u,type:b}],ne=_e(_.cx,_.cy,H,J);return I=P(P(P(P({},a.presentationProps),{},{percent:X,cornerRadius:o,name:x,tooltipPayload:V,midAngle:J,middleRadius:H,tooltipPosition:ne},q),_),{},{value:W(O,u),startAngle:R,endAngle:Y,payload:q,paddingAngle:ce(v)*h}),I})}return k}function mn(e){var{props:t,previousSectorsRef:a}=e,{sectors:r,isAnimationActive:i,animationBegin:s,animationDuration:o,animationEasing:c,activeShape:d,inactiveShape:u,onAnimationStart:g,onAnimationEnd:b}=t,p=ca(t,"recharts-pie-"),v=a.current,[f,h]=l.useState(!0),w=l.useCallback(()=>{typeof b=="function"&&b(),h(!1)},[b]),y=l.useCallback(()=>{typeof g=="function"&&g(),h(!0)},[g]);return l.createElement(Oe,{begin:s,duration:o,isActive:i,easing:c,from:{t:0},to:{t:1},onAnimationStart:y,onAnimationEnd:w,key:p},A=>{var{t:N}=A,k=[],I=r&&r[0],O=I.startAngle;return r.forEach((j,E)=>{var x=v&&v[E],_=E>0?da(j,"paddingAngle",0):0;if(x){var X=He(x.endAngle-x.startAngle,j.endAngle-j.startAngle),R=P(P({},j),{},{startAngle:O+_,endAngle:O+X(N)+_});k.push(R),O=R.endAngle}else{var{endAngle:q,startAngle:Y}=j,J=He(0,q-Y),H=J(N),V=P(P({},j),{},{startAngle:O+_,endAngle:O+H+_});k.push(V),O=V.endAngle}}),a.current=k,l.createElement(ee,null,l.createElement(wt,{sectors:k,activeShape:d,inactiveShape:u,allOtherPieProps:t,showLabels:!f}))})}function hn(e){var{sectors:t,isAnimationActive:a,activeShape:r,inactiveShape:i}=e,s=l.useRef(null),o=s.current;return a&&t&&t.length&&(!o||o!==t)?l.createElement(mn,{props:e,previousSectorsRef:s}):l.createElement(wt,{sectors:t,activeShape:r,inactiveShape:i,allOtherPieProps:e,showLabels:!0})}function gn(e){var{hide:t,className:a,rootTabIndex:r}=e,i=ae("recharts-pie",a);return t?null:l.createElement(ee,{tabIndex:r,className:i},l.createElement(hn,e))}var Nt={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!oa.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function pn(e){var t=fe(e,Nt),a=l.useMemo(()=>ht(e.children,be),[e.children]),r=U(t,!1),i=l.useMemo(()=>({name:t.name,nameKey:t.nameKey,tooltipType:t.tooltipType,data:t.data,dataKey:t.dataKey,cx:t.cx,cy:t.cy,startAngle:t.startAngle,endAngle:t.endAngle,minAngle:t.minAngle,paddingAngle:t.paddingAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,cornerRadius:t.cornerRadius,legendType:t.legendType,fill:t.fill,presentationProps:r}),[t.cornerRadius,t.cx,t.cy,t.data,t.dataKey,t.endAngle,t.innerRadius,t.minAngle,t.name,t.nameKey,t.outerRadius,t.paddingAngle,t.startAngle,t.tooltipType,t.legendType,t.fill,r]),s=pe(o=>Cr(o,i,a));return l.createElement(l.Fragment,null,l.createElement(la,{fn:an,args:P(P({},t),{},{sectors:s})}),l.createElement(gn,G({},t,{sectors:s})))}class Ue extends l.PureComponent{constructor(){super(...arguments),ye(this,"id",xa("recharts-pie-"))}render(){return l.createElement(l.Fragment,null,l.createElement(sa,{data:this.props.data,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:0,radiusAxisId:0,stackId:void 0,barSize:void 0,type:"pie"}),l.createElement(tn,this.props),l.createElement(pn,this.props),this.props.children)}}ye(Ue,"displayName","Pie");ye(Ue,"defaultProps",Nt);function fn(e){var t=re();return l.useEffect(()=>{t(va(e))},[t,e]),null}var xn=["width","height","layout"];function Te(){return Te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Te.apply(null,arguments)}function vn(e,t){if(e==null)return{};var a,r,i=bn(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function bn(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var yn={top:5,right:5,bottom:5,left:5},jn={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:yn,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},wn=l.forwardRef(function(t,a){var r,i=fe(t.categoricalChartProps,jn),{width:s,height:o,layout:c}=i,d=vn(i,xn);if(!Ve(s)||!Ve(o))return null;var{chartName:u,defaultTooltipEventType:g,validateTooltipEventTypes:b,tooltipPayloadSearcher:p}=t,v={chartName:u,defaultTooltipEventType:g,validateTooltipEventTypes:b,tooltipPayloadSearcher:p,eventEmitter:void 0};return l.createElement(ba,{preloadedState:{options:v},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:u},l.createElement(ya,{chartData:i.data}),l.createElement(ja,{width:s,height:o,layout:c,margin:i.margin}),l.createElement(wa,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),l.createElement(fn,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),l.createElement(Na,Te({width:s,height:o},d,{ref:a})))}),Nn=["item"],Pn={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},On=l.forwardRef((e,t)=>{var a=fe(e,Pn);return l.createElement(wn,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Nn,tooltipPayloadSearcher:Pa,categoricalChartProps:a,ref:t})});const _n=({data:e,title:t="Distribuci√≥n por Capitalizaci√≥n de Mercado"})=>{const a=["#F59E0B","#3B82F6","#10B981","#8B5CF6","#EF4444","#06B6D4","#F97316","#84CC16","#EC4899","#6366F1","#14B8A6","#A855F7","#DC2626","#059669","#6B7280"],r=({active:o,payload:c,label:d})=>{if(o&&c&&c.length){const u=c[0].payload;return n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg border",children:[n.jsx("p",{className:"font-semibold text-gray-800",children:u.name}),u.isOthers?n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"text-sm text-gray-600",children:["Incluye: ",u.coinsIncluded]}),n.jsxs("p",{className:"text-sm text-blue-600",children:["Cap. Mercado: $",(u.value/1e9).toFixed(2),"B"]}),n.jsxs("p",{className:`text-sm ${u.change>=0?"text-green-600":"text-red-600"}`,children:["Cambio promedio 24h: ",u.change>=0?"+":"",u.change?.toFixed(2),"%"]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("p",{className:"text-sm text-gray-600",children:["S√≠mbolo: ",u.symbol.toUpperCase()]}),n.jsxs("p",{className:"text-sm text-blue-600",children:["Cap. Mercado: $",(u.value/1e9).toFixed(2),"B"]}),n.jsxs("p",{className:"text-sm text-green-600",children:["Precio: $",u.price]}),n.jsxs("p",{className:`text-sm ${u.change>=0?"text-green-600":"text-red-600"}`,children:["Cambio 24h: ",u.change>=0?"+":"",u.change?.toFixed(2),"%"]})]}),n.jsxs("p",{className:"text-sm text-purple-600 font-medium",children:["Porcentaje: ",u.percentage?.toFixed(1),"%"]})]})}return null},i=o=>{const{payload:c}=o;return n.jsx("ul",{className:"flex flex-wrap justify-center gap-2 mt-4",children:c.map((d,u)=>n.jsxs("li",{className:"flex items-center text-xs",children:[n.jsx("span",{className:"w-3 h-3 rounded-full mr-1",style:{backgroundColor:d.color}}),n.jsx("span",{className:"text-gray-700",children:d.payload.isOthers?"Otras":d.payload.symbol.toUpperCase()})]},`item-${u}`))})},s=({cx:o,cy:c,midAngle:d,innerRadius:u,outerRadius:g,percent:b,symbol:p,isOthers:v})=>{const f=b*100;if(f<2)return null;const h=Math.PI/180,w=u+(g-u)*1.4,y=o+w*Math.cos(-d*h),A=c+w*Math.sin(-d*h),N=y>o?"start":"end";return n.jsxs("text",{x:y,y:A,fill:"#374151",textAnchor:N,dominantBaseline:"central",fontSize:"12",fontWeight:"500",className:"pointer-events-none",children:[v?"Otras":p.toUpperCase()," ",f.toFixed(0),"%"]})};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4 text-center",children:t}),n.jsx("div",{className:"h-80",children:n.jsx(Oa,{width:"100%",height:"100%",children:n.jsxs(On,{children:[n.jsx(Ue,{data:e,cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",label:s,children:e.map((o,c)=>n.jsx(be,{fill:o.color||a[c%a.length]},`cell-${c}`))}),n.jsx(_a,{content:n.jsx(r,{})}),n.jsx(ve,{content:n.jsx(i,{})})]})})})]})},Sn=({coins:e=[],loading:t=!1})=>{const a=De(),r=s=>{a(`/coin/${s}`)};if(t)return n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6",role:"status","aria-label":"Cargando datos de criptomonedas",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded mb-4"}),[...Array(5)].map((s,o)=>n.jsxs("div",{className:"flex items-center space-x-4 mb-3",children:[n.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),n.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/6"})]}),n.jsx("div",{className:"w-20 h-4 bg-gray-200 rounded"})]},o))]})});if(!e.length)return n.jsx("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6 text-center",children:n.jsx("p",{className:"text-gray-500",children:"No hay monedas para mostrar"})});const i=s=>s>=1e12?(s/1e12).toFixed(2)+"T":s>=1e9?(s/1e9).toFixed(2)+"B":s>=1e6?(s/1e6).toFixed(2)+"M":s>=1e3?(s/1e3).toFixed(2)+"K":s?.toFixed(2)||"0";return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[n.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:[n.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"Top Criptomonedas"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Ordenadas por capitalizaci√≥n de mercado"})]}),n.jsx("div",{className:"block lg:hidden",children:e.slice(0,10).map((s,o)=>n.jsxs("div",{onClick:()=>r(s.id),className:"p-4 border-b border-gray-100 last:border-b-0 cursor-pointer hover:bg-gray-50 transition-colors",role:"article","aria-labelledby":`coin-${s.id}-name`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[n.jsx("span",{className:"text-sm font-semibold text-gray-500 w-6 text-center flex-shrink-0","aria-label":`Posici√≥n ${s.market_cap_rank||o+1}`,children:s.market_cap_rank||o+1}),n.jsx("img",{src:s.image,alt:`Logo de ${s.name}`,className:"w-8 h-8 rounded-full flex-shrink-0"}),n.jsxs("div",{className:"min-w-0 flex-1",children:[n.jsx("h3",{id:`coin-${s.id}-name`,className:"font-semibold text-gray-900 truncate",children:s.name}),n.jsx("p",{className:"text-sm text-gray-500 uppercase truncate",children:s.symbol})]})]}),n.jsx("button",{className:"p-1 text-gray-400 hover:text-yellow-500 transition-colors focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 rounded",onClick:c=>c.stopPropagation(),"aria-label":`Agregar ${s.name} a favoritos`,children:n.jsx(Se,{className:"w-4 h-4"})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 mb-1",children:"Precio"}),n.jsxs("p",{className:"font-semibold text-gray-900",children:["$",s.current_price?.toLocaleString()||"N/A"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 mb-1",children:"24h"}),n.jsxs("div",{className:"flex items-center space-x-1",children:[(s.price_change_percentage_24h||0)>=0?n.jsx(z,{className:"w-3 h-3 text-green-500","aria-hidden":"true"}):n.jsx(se,{className:"w-3 h-3 text-red-500","aria-hidden":"true"}),n.jsxs("span",{className:`font-semibold ${(s.price_change_percentage_24h||0)>=0?"text-green-500":"text-red-500"}`,"aria-label":`Cambio de precio de ${s.price_change_percentage_24h?.toFixed(2)||0}%`,children:[(s.price_change_percentage_24h||0)>=0?"+":"",s.price_change_percentage_24h?.toFixed(2)||"0.00","%"]})]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 mb-1",children:"Cap. Mercado"}),n.jsxs("p",{className:"font-semibold text-gray-900",children:["$",i(s.market_cap)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-500 mb-1",children:"Volumen 24h"}),n.jsxs("p",{className:"font-semibold text-gray-900",children:["$",i(s.total_volume)]})]})]})]},s.id))}),n.jsx("div",{className:"hidden lg:block overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",role:"table",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",scope:"col",children:"#"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",scope:"col",children:"Moneda"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",scope:"col",children:"Precio"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",scope:"col",children:"1h"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",scope:"col",children:"24h"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",scope:"col",children:"7d"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",scope:"col",children:"Cap. Mercado"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",scope:"col",children:"Volumen 24h"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",scope:"col",children:"Acciones"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map((s,o)=>n.jsxs("tr",{onClick:()=>r(s.id),className:"hover:bg-gray-50 transition-colors duration-150 focus-within:bg-gray-50 cursor-pointer",role:"row",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.market_cap_rank||o+1}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("img",{className:"h-8 w-8 rounded-full",src:s.image,alt:`Logo de ${s.name}`}),n.jsxs("div",{className:"ml-4",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),n.jsx("div",{className:"text-sm text-gray-500",children:s.symbol?.toUpperCase()})]})]})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["$",s.current_price?.toLocaleString()||"0"]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:n.jsxs("div",{className:`flex items-center ${(s.price_change_percentage_1h_in_currency||0)>=0?"text-green-600":"text-red-600"}`,children:[(s.price_change_percentage_1h_in_currency||0)>=0?n.jsx(z,{className:"w-3 h-3 mr-1","aria-hidden":"true"}):n.jsx(se,{className:"w-3 h-3 mr-1","aria-hidden":"true"}),n.jsxs("span",{"aria-label":`Cambio de precio en 1 hora: ${s.price_change_percentage_1h_in_currency?.toFixed(2)||0}%`,children:[(s.price_change_percentage_1h_in_currency||0)>=0?"+":"",s.price_change_percentage_1h_in_currency?.toFixed(2)||"0","%"]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:n.jsxs("div",{className:`flex items-center ${(s.price_change_percentage_24h||0)>=0?"text-green-600":"text-red-600"}`,children:[(s.price_change_percentage_24h||0)>=0?n.jsx(z,{className:"w-3 h-3 mr-1","aria-hidden":"true"}):n.jsx(se,{className:"w-3 h-3 mr-1","aria-hidden":"true"}),n.jsxs("span",{"aria-label":`Cambio de precio en 24 horas: ${s.price_change_percentage_24h?.toFixed(2)||0}%`,children:[(s.price_change_percentage_24h||0)>=0?"+":"",s.price_change_percentage_24h?.toFixed(2)||"0","%"]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:n.jsxs("div",{className:`flex items-center ${(s.price_change_percentage_7d_in_currency||0)>=0?"text-green-600":"text-red-600"}`,children:[(s.price_change_percentage_7d_in_currency||0)>=0?n.jsx(z,{className:"w-3 h-3 mr-1","aria-hidden":"true"}):n.jsx(se,{className:"w-3 h-3 mr-1","aria-hidden":"true"}),n.jsxs("span",{"aria-label":`Cambio de precio en 7 d√≠as: ${s.price_change_percentage_7d_in_currency?.toFixed(2)||0}%`,children:[(s.price_change_percentage_7d_in_currency||0)>=0?"+":"",s.price_change_percentage_7d_in_currency?.toFixed(2)||"0","%"]})]})}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",i(s.market_cap)]}),n.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",i(s.total_volume)]}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center space-x-2",children:["              ",n.jsx("button",{onClick:c=>c.stopPropagation(),className:"p-1 text-gray-400 hover:text-yellow-500 transition-colors focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 rounded","aria-label":`Agregar ${s.name} a favoritos`,children:n.jsx(Se,{className:"w-4 h-4"})}),n.jsx("button",{onClick:c=>{c.stopPropagation(),r(s.id)},className:"p-1 text-gray-400 hover:text-blue-500 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded","aria-label":`Ver detalles de ${s.name}`,children:n.jsx(gt,{className:"w-4 h-4"})})]})})]},s.id))})]})}),n.jsx("div",{className:"px-4 py-3 sm:px-6 bg-gray-50 border-t border-gray-200",children:n.jsx("p",{className:"text-xs sm:text-sm text-gray-500 text-center",children:"Datos actualizados en tiempo real desde CoinGecko"})})]})},An=({coins:e=[]})=>{const t=De(),a=r=>{t(`/coin/${r}`)};return n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[n.jsx(z,{className:"w-5 h-5 text-orange-500"}),n.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Monedas Trending"}),n.jsx(Se,{className:"w-4 h-4 text-yellow-500 fill-current"})]}),n.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Haz clic en cualquier moneda para ver sus detalles"}),n.jsx("div",{className:"space-y-4",children:e.map((r,i)=>n.jsxs("div",{onClick:()=>a(r.item.id),className:"flex items-center justify-between p-3 rounded-lg border border-gray-100 hover:border-orange-200 hover:bg-orange-50 hover:shadow-md transition-all duration-200 cursor-pointer group transform hover:scale-[1.02]",role:"button",tabIndex:0,"aria-label":`Ver detalles de ${r.item.name}`,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),a(r.item.id))},children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"flex items-center justify-center w-6 h-6 bg-gradient-to-r from-orange-400 to-pink-500 text-white rounded-full text-xs font-bold group-hover:from-orange-500 group-hover:to-pink-600 transition-all",children:i+1}),n.jsx("img",{src:r.item.small,alt:`Logo de ${r.item.name}`,className:"w-8 h-8 rounded-full group-hover:scale-110 transition-transform"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800 group-hover:text-orange-600 transition-colors",children:r.item.name}),n.jsx("p",{className:"text-sm text-gray-500 uppercase group-hover:text-gray-600 transition-colors",children:r.item.symbol})]})]}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-600 group-hover:text-gray-700 transition-colors",children:"Ranking"}),n.jsxs("p",{className:"font-bold text-gray-800 group-hover:text-orange-600 transition-colors",children:["#",r.item.market_cap_rank||"N/A"]})]}),n.jsx(gt,{className:"w-4 h-4 text-gray-400 group-hover:text-orange-500 transition-all transform group-hover:scale-110",title:`Ver detalles de ${r.item.name}`,"aria-hidden":"true"})]})]},r.item.id))}),e.length===0&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx(z,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),n.jsx("p",{className:"text-gray-500",children:"No hay datos trending disponibles"})]})]})},En=()=>{const e=l.useRef(new Set);return l.useEffect(()=>{const i=()=>{e.current.forEach(s=>{clearTimeout(s)}),e.current.clear()};return window.addEventListener("pagehide",i),()=>{e.current.forEach(s=>{clearTimeout(s)}),e.current.clear(),window.removeEventListener("pagehide",i)}},[]),{setSafeTimeout:(i,s)=>{const o=setTimeout(()=>{e.current.delete(o),i()},s);return e.current.add(o),o},clearSafeTimeout:i=>{clearTimeout(i),e.current.delete(i)},clearAllTimeouts:()=>{e.current.forEach(i=>{clearTimeout(i)}),e.current.clear()}}},Cn=({onSearch:e,onCoinSelect:t,placeholder:a="Buscar criptomonedas..."})=>{const r=De(),{setSafeTimeout:i,clearSafeTimeout:s}=En(),[o,c]=l.useState(""),[d,u]=l.useState([]),[g,b]=l.useState([]),[p,v]=l.useState(!1),[f,h]=l.useState(!1),[w,y]=l.useState(!1),A=l.useRef(null),N=l.useRef(null);l.useEffect(()=>{const x=_=>{A.current&&!A.current.contains(_.target)&&(h(!1),y(!1))};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]),l.useEffect(()=>(N.current&&s(N.current),o.trim().length>0?N.current=i(()=>{k(o)},300):(u([]),b([]),h(!1),y(!1)),()=>{N.current&&s(N.current)}),[o,i,s]);const k=async x=>{try{v(!0);const _=await $.searchCoinsIntelligent(x);u(_.results||[]),b(_.suggestions||[]),_.results.length===0?(y(!0),h(!1)):(h(!0),y(!1))}catch(_){console.error("Error en la b√∫squeda:",_),u([]),b([]),h(!1),y(!0)}finally{v(!1)}},I=x=>{x.preventDefault(),o.trim()&&e&&e(o.trim())},O=x=>{c(""),h(!1),y(!1),r(`/coin/${x.id}`),t&&t(x)},j=x=>{c(x.target.value)},E=()=>{d.length>0?h(!0):o.trim().length>0&&d.length===0&&y(!0)};return n.jsxs("div",{ref:A,className:"relative w-full",children:[n.jsx("form",{onSubmit:I,children:n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:o,onChange:j,onFocus:E,placeholder:a,className:"w-full px-4 py-3 pl-12 pr-4 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 text-gray-700 bg-white shadow-sm"}),n.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:p?n.jsxs("svg",{className:"animate-spin h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):n.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),f&&d.length>0&&n.jsx("div",{className:"absolute z-50 w-full mt-2 bg-white border border-gray-200 rounded-xl shadow-lg max-h-80 overflow-y-auto",children:n.jsxs("div",{className:"p-2",children:[n.jsx("p",{className:"text-xs text-gray-500 mb-2 px-2",children:"Resultados encontrados:"}),d.map(x=>n.jsxs("div",{onClick:()=>O(x),className:"flex items-center p-3 hover:bg-gray-50 rounded-lg cursor-pointer transition-colors",children:[x.thumb&&n.jsx("img",{src:x.thumb,alt:x.name,className:"w-6 h-6 rounded-full mr-3"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"font-medium text-gray-900",children:x.name}),n.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full font-medium",children:x.symbol.toUpperCase()})]}),x.market_cap_rank&&n.jsxs("p",{className:"text-xs text-gray-500",children:["Ranking: #",x.market_cap_rank]})]})]},x.id))]})}),w&&n.jsx("div",{className:"absolute z-50 w-full mt-2 bg-white border border-gray-200 rounded-xl shadow-lg",children:n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"text-center mb-4",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-gray-100 rounded-full mb-3",children:n.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0118 12c0-4.418-3.582-8-8-8s-8 3.582-8 8c0 2.027.754 3.879 2 5.291"})})}),n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"No se encontraron resultados"}),n.jsxs("p",{className:"text-xs text-gray-500 mb-4",children:['No encontramos "',n.jsx("span",{className:"font-medium",children:o}),'". Verifica la ortograf√≠a o prueba con otro t√©rmino.']})]}),g.length>0&&n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-gray-700 mb-3",children:"Tal vez est√°s buscando:"}),n.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:g.map(x=>n.jsxs("div",{onClick:()=>O(x),className:"flex items-center p-2 hover:bg-gray-50 rounded-lg cursor-pointer transition-colors",children:[x.thumb&&n.jsx("img",{src:x.thumb,alt:x.name,className:"w-5 h-5 rounded-full mr-2"}),n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("span",{className:"text-sm font-medium text-gray-900",children:x.name}),n.jsx("span",{className:"text-xs bg-blue-100 text-blue-600 px-1.5 py-0.5 rounded font-medium",children:x.symbol})]})})]},x.id))})]})]})})]})},$n=()=>{const{user:e}=Ot(),[t,a]=l.useState(!0),[r,i]=l.useState(""),[s,o]=l.useState(null),[c,d]=l.useState([]),[u,g]=l.useState([]),[b,p]=l.useState([]),[v,f]=l.useState([]),[h,w]=l.useState("bitcoin"),[y,A]=l.useState(!1),[N,k]=l.useState(!1),[I,O]=l.useState(null),[j,E]=l.useState(7),[x,_]=l.useState(!1);Ta(()=>{$.cleanExpiredCache()},5*60*1e3),l.useEffect(()=>{R()},[]),l.useEffect(()=>{if(h&&j){if(![1,7,30,365].includes(j)){E(7);return}X()}},[h,j]);const X=async()=>{try{_(!0),console.log(`üìä Updating historical data for ${h} with ${j} days`);const S=(await $.getCoinHistory(h,j)).prices.map(([F,C])=>({timestamp:F,price:C.toFixed(2)}));f(S)}catch(m){console.error("Error updating historical data:",m)}finally{_(!1)}},R=async()=>{try{a(!0),i(""),console.log("üöÄ Loading dashboard data...");const m=await $.loadDashboardData({historicalDays:j,selectedCoin:h}),S=m.fallbacksUsed&&m.fallbacksUsed.length>0;if(k(S),m.errors&&m.errors.length>0&&(console.warn("‚ö†Ô∏è Some data could not be updated, using available data:",m.errors),i(S?`Algunos datos pueden no estar actualizados. Usando informaci√≥n guardada previamente. ${m.fallbacksUsed.join(", ")} usando datos de respaldo.`:"Algunos datos no pudieron cargarse completamente. Mostrando informaci√≥n disponible.")),m.globalStats&&o(m.globalStats.data||m.globalStats),m.coins&&m.coins.length>0&&d(m.coins),m.trending&&m.trending.coins&&g(m.trending.coins),m.pieChart&&m.pieChart.length>0&&p(m.pieChart),m.historical&&m.historical.prices){const F=m.historical.prices.map(([C,Q])=>({timestamp:C,price:Q.toFixed(2)}));f(F)}O(new Date),S&&m.fallbacksUsed.length>=4&&i("Mostrando datos guardados previamente. La conexi√≥n con la API puede estar temporalmente limitada."),console.log("‚úÖ Dashboard data loaded:",{globalStats:!!m.globalStats,coins:m.coins?.length||0,trending:m.trending?.coins?.length||0,pieChart:m.pieChart?.length||0,historical:m.historical?.prices?.length||0,fallbacksUsed:m.fallbacksUsed||[],errors:m.errors||[]})}catch(m){console.error("üí• Critical error loading dashboard data:",{error:m.message,stack:m.stack});try{console.log("üîÑ Attempting to load any cached data...");const S=$.getCacheStats();console.log("Cache state:",S),S.persistentCache.size>0?(i("Error de conexi√≥n. Mostrando datos guardados anteriormente."),k(!0)):i("Error al cargar los datos y no hay datos guardados disponibles. Por favor, verifica tu conexi√≥n a internet e intenta de nuevo.")}catch(S){console.error("Error accessing cache:",S),i("Error al cargar los datos. Por favor, intenta de nuevo.")}}finally{a(!1)}},q=async()=>{A(!0),i("");try{console.log("üîÑ Manual refresh initiated..."),$.cleanExpiredCache(),await R(),!r&&!N&&console.log("‚úÖ Manual refresh completed successfully")}catch(m){console.error("Error during manual refresh:",m),i("Error al actualizar los datos. Mostrando informaci√≥n disponible.")}finally{A(!1)}},Y=async m=>{if(m.trim())try{a(!0),i(""),await new Promise(F=>setTimeout(F,100));const S=await $.searchCoinsIntelligent(m);if(S.results.length>0){const F=S.results.slice(0,5).map(Q=>Q.id),C=[];for(const Q of F)try{const D=await $.getCoinById(Q);D&&C.push({id:D.id,name:D.name,symbol:D.symbol,image:D.image.small,current_price:D.market_data.current_price.usd,market_cap:D.market_data.market_cap.usd,market_cap_rank:D.market_cap_rank,price_change_percentage_24h:D.market_data.price_change_percentage_24h,price_change_percentage_7d_in_currency:D.market_data.price_change_percentage_7d,total_volume:D.market_data.total_volume.usd,sparkline_in_7d:{price:[]}}),await new Promise(Pt=>setTimeout(Pt,150))}catch(D){console.warn(`Error loading coin ${Q}:`,D)}C.length>0&&d(C)}}catch(S){console.error("Error en b√∫squeda:",S),i("Error en la b√∫squeda. La API puede estar temporalmente sobrecargada. Intenta de nuevo en unos segundos.")}finally{a(!1)}},J=async m=>{try{w(m)}catch{i("Error al seleccionar la moneda")}},H=async m=>{E(m),console.log(`üìä User changed historical chart time range to ${m} days`)},V=m=>{switch(m){case 1:return"1 D√≠a";case 7:return"7 D√≠as";case 30:return"1 Mes";case 365:return"1 A√±o";default:return`${m} D√≠as`}},ne=()=>{const m=[{id:"bitcoin",name:"Bitcoin"},{id:"ethereum",name:"Ethereum"},{id:"cardano",name:"Cardano"},{id:"polkadot",name:"Polkadot"},{id:"chainlink",name:"Chainlink"}],S=c.slice(0,10).map(C=>({id:C.id,name:C.name})),F=new Map;return m.forEach(C=>F.set(C.id,C)),S.forEach(C=>F.set(C.id,C)),Array.from(F.values())};return t&&!y?n.jsx(_t,{message:"Cargando dashboard..."}):n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx(Sa,{}),n.jsx("div",{className:"bg-gray-50 min-h-screen pt-14 sm:pt-16",children:n.jsx("main",{className:"max-w-7xl mx-auto py-4 sm:py-6 px-4 sm:px-6 lg:px-8",role:"main",children:n.jsxs("div",{className:"py-4 sm:py-6",children:[n.jsxs("div",{className:"flex flex-col space-y-4 sm:flex-row sm:justify-between sm:items-start sm:space-y-0 mb-6 sm:mb-8",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-lg sm:text-xl text-gray-700 mb-2",children:["Bienvenido de vuelta, ",n.jsx("strong",{className:"text-gray-900",children:e?.fullName})]}),N&&n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-amber-600 bg-amber-50 px-3 py-1 rounded-lg border border-amber-200",children:[n.jsx("span",{className:"w-2 h-2 bg-amber-500 rounded-full animate-pulse"}),n.jsx("span",{children:"Mostrando datos guardados - Actualizando en segundo plano"})]}),I&&!N&&n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-green-600",children:[n.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),n.jsxs("span",{children:["√öltima actualizaci√≥n: ",I.toLocaleTimeString()]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[n.jsxs("button",{onClick:q,disabled:y,className:"flex items-center justify-center space-x-2 bg-blue-600 hover:bg-blue-700 text-white px-3 sm:px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 text-sm sm:text-base","aria-label":y?"Actualizando datos":"Actualizar datos del dashboard","aria-describedby":"refresh-status",children:[n.jsx(le,{className:`w-4 h-4 ${y?"animate-spin":""}`,"aria-hidden":"true"}),n.jsx("span",{children:y?"Actualizando...":"Actualizar"})]}),e?.role==="admin"&&n.jsxs("button",{onClick:()=>{$.clearAllCache(),i(""),k(!1),R()},className:"flex items-center justify-center space-x-2 bg-red-600 hover:bg-red-700 text-white px-3 sm:px-4 py-2 rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 text-sm sm:text-base",title:"Limpiar todo el cache y recargar (Admin)",children:[n.jsx("span",{children:"üßπ"}),n.jsx("span",{children:"Limpiar Cache"})]})]})]}),r&&n.jsx("div",{className:"mb-4 sm:mb-6",role:"alert","aria-live":"polite",children:n.jsx(ka,{message:r,onClose:()=>i("")})}),n.jsx("div",{className:"mb-6 sm:mb-8",children:n.jsx(Cn,{onSearch:Y,placeholder:"Buscar criptomonedas..."})}),s&&n.jsxs("section",{className:"mb-6 sm:mb-8","aria-labelledby":"stats-heading",children:[n.jsx("h2",{id:"stats-heading",className:"sr-only",children:"Estad√≠sticas del mercado"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:[n.jsx(oe,{title:"Cap. Mercado Total",value:`$${$.formatNumber(s.total_market_cap.usd)}`,change:s.market_cap_change_percentage_24h_usd,changePercent:s.market_cap_change_percentage_24h_usd?.toFixed(2),icon:Aa,color:"blue"}),n.jsx(oe,{title:"Volumen 24h",value:`$${$.formatNumber(s.total_volume.usd)}`,change:5.2,changePercent:"5.2",icon:Ge,color:"green"}),n.jsx(oe,{title:"Dominancia BTC",value:`${s.market_cap_percentage.btc?.toFixed(1)}%`,change:s.market_cap_percentage.btc-45,changePercent:(s.market_cap_percentage.btc-45).toFixed(2),icon:z,color:"orange"}),n.jsx(oe,{title:"Criptomonedas Activas",value:s.active_cryptocurrencies?.toLocaleString(),change:2.1,changePercent:"2.1",icon:Ea,color:"purple"})]})]}),n.jsxs("section",{className:"mb-6 sm:mb-8","aria-labelledby":"charts-heading",children:[n.jsx("h2",{id:"charts-heading",className:"sr-only",children:"Gr√°ficos de an√°lisis"}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[n.jsx("div",{className:"lg:col-span-1",children:n.jsx(_n,{data:b})}),n.jsx("div",{className:"lg:col-span-2",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-4 mb-4 sm:mb-0",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Precio Hist√≥rico"}),n.jsxs("div",{className:"relative",children:[n.jsx("select",{value:h,onChange:m=>w(m.target.value),disabled:x,className:"appearance-none bg-white border border-gray-300 rounded-lg px-3 py-2 pr-8 text-sm font-medium text-gray-700 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 cursor-pointer min-w-[140px] disabled:opacity-50 disabled:cursor-not-allowed",children:ne().map(m=>n.jsx("option",{value:m.id,children:m.name},m.id))}),n.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:x?n.jsx(le,{className:"w-4 h-4 text-blue-500 animate-spin"}):n.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),n.jsx("span",{className:"text-sm text-gray-500",children:V(j)})]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:[1,7,30,365].map(m=>n.jsx("button",{onClick:()=>H(m),disabled:y,className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 ${j===m?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:m===1?"1D":m===7?"7D":m===30?"1M":"1A"},m))})]}),n.jsxs("div",{className:"h-80 relative",children:[x&&n.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10 rounded-lg",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(le,{className:"w-6 h-6 text-blue-500 animate-spin"}),n.jsxs("span",{className:"text-sm font-medium text-gray-600",children:["Cargando datos de ",ne().find(m=>m.id===h)?.name||h,"..."]})]})}),v&&v.length>0?n.jsx(Ca,{data:v,title:"",coinName:ne().find(m=>m.id===h)?.name||"Bitcoin",showTitle:!1,className:"!p-0 !shadow-none !bg-transparent"}):x?null:n.jsx("div",{className:"flex items-center justify-center h-full bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Ge,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500 text-lg font-medium",children:"No hay datos hist√≥ricos disponibles"}),n.jsxs("p",{className:"text-gray-400 text-sm mt-2",children:["Los datos del gr√°fico no pudieron cargarse para ",V(j).toLowerCase()]}),n.jsxs("button",{onClick:()=>H(j),className:"mt-4 inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[n.jsx(le,{className:"w-4 h-4 mr-2"}),"Reintentar"]})]})})]})]})})]})]}),n.jsxs("section",{className:"mb-6 sm:mb-8","aria-labelledby":"data-section-heading",children:[n.jsx("h2",{id:"data-section-heading",className:"sr-only",children:"Datos de mercado y tendencias"}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4 sm:gap-6",children:[n.jsx("div",{className:"lg:col-span-1 order-2 lg:order-1",children:n.jsx(An,{coins:u})}),n.jsx("div",{className:"lg:col-span-3 order-1 lg:order-2",children:n.jsx(Sn,{coins:c,loading:t,onCoinSelect:J})})]})]}),e?.role==="admin"&&n.jsx("section",{className:"mb-6","aria-labelledby":"admin-panel-heading",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-4 sm:p-6",children:[n.jsx("h3",{id:"admin-panel-heading",className:"text-lg font-bold text-gray-800 mb-4",children:"Panel de Administrador"}),n.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"Estado del Cache"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Cache Normal: "}),n.jsxs("span",{className:"font-medium",children:[$.getCacheStats().normalCache.size," entradas"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Cache Persistente: "}),n.jsxs("span",{className:"font-medium",children:[$.getCacheStats().persistentCache.size," entradas"]})]}),n.jsxs("div",{className:"sm:col-span-2",children:[n.jsx("span",{className:"text-gray-600",children:"Usando datos de respaldo: "}),n.jsx("span",{className:`font-medium ${N?"text-amber-600":"text-green-600"}`,children:N?"S√≠":"No"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("button",{className:"p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 text-left","aria-describedby":"manage-users-desc",children:[n.jsx("h4",{className:"font-semibold text-gray-800",children:"Gestionar Usuarios"}),n.jsx("p",{id:"manage-users-desc",className:"text-sm text-gray-600",children:"Administrar cuentas de usuario"})]}),n.jsxs("button",{className:"p-4 border border-gray-200 rounded-lg hover:border-green-300 hover:bg-green-50 transition-colors focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 text-left","aria-describedby":"api-config-desc",children:[n.jsx("h4",{className:"font-semibold text-gray-800",children:"Configuraci√≥n API"}),n.jsx("p",{id:"api-config-desc",className:"text-sm text-gray-600",children:"Configurar conexiones de datos"})]}),n.jsxs("button",{className:"p-4 border border-gray-200 rounded-lg hover:border-purple-300 hover:bg-purple-50 transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 text-left sm:col-span-2 lg:col-span-1","aria-describedby":"reports-desc",children:[n.jsx("h4",{className:"font-semibold text-gray-800",children:"Reportes"}),n.jsx("p",{id:"reports-desc",className:"text-sm text-gray-600",children:"Generar informes detallados"})]})]})]})})]})})})]})};export{$n as default};
